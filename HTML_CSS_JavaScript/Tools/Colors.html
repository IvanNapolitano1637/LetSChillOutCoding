<!DOCTYPE html>
<html lang="en"><!--T01#005 - Irene - Colors-->
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Colors and their codes</title>
		<style>
			body{
				margin: 0;
				min-height: 100vh;
				display: flex;
				justify-content: center;
				align-items: center;
				transition: background-color 0.1s;
				font-family: sans-serif;
			}
			#optionZone{
				background-color: rgba(255, 255, 255, 0.85);
				text-align: center;
				padding: 25px;
				border-radius: 20px;
				box-shadow: 0 10px 30px rgba(0,0,0,0.3);
				backdrop-filter: blur(5px);
				width: 600px;
				max-width: 95%;
				max-height: 95vh;
				overflow-y: auto;
				user-select: none;
			}
			#sliders{
				display: block;
				width: 100%;
				margin-top: 20px;
			}
			.slider-row{
				display: flex;
				align-items: center;
				gap: 10px;
				margin-bottom: 15px;
				width: 100%;
			}
			.slider-row label{
				flex-basis: 50px;
				flex-shrink: 0;
				text-align: right;
				font-weight: bold;
				font-size: 0.9em;
			}
			.slider{
				-webkit-appearance: none;
				appearance: none;
				flex-grow: 1;
				height: 8px;
				border-radius: 5px;
				background: #ddd;
				outline: none;
			}
			.slider::-webkit-slider-thumb{
				-webkit-appearance: none;
				width: 20px;
				height: 20px;
				background: #0075FF;
				cursor: pointer;
				border-radius: 50%;
				border: 2px solid white;
			}
			output{
				background: #FFFF00;
				flex-basis: 45px;
				flex-shrink: 0;
				text-align: center;
				font-family: monospace;
				font-weight: bold;
				border-radius: 4px;
				padding: 2px 5px;
			}
			#valueHexCode{
				cursor: pointer;
				padding: 5px 15px;
				transition: transform 0.1s;
			}
			#valueHexCode:active{
				transform: scale(0.9);
			}
			.btn-group{
				margin: 10px 0;
			}
			.btn-group button{
				cursor: pointer;
				padding: 8px 12px;
				margin: 2px;
				border: 1px solid #ccc;
				border-radius: 5px;
				font-weight: bold;
				min-width: 75px;
				background: white;
				outline: none;
				user-select: none;
			}
			#more, #less{
				min-width: 0 !important;
				width: auto;
				padding-left: 10px;
				padding-right: 10px;
			}
			.control-group{
				display: flex;
				flex-direction: column;
				gap: 8px;
				margin-top: 15px;
				user-select: none;
			}
			.button-row{
				display: flex;
				justify-content: center;
				gap: 1px;
				flex-wrap: nowrap;
				width: 100%;
			}
			button.step{
				flex: 1;
				min-width: 25px;
				max-width: 45px;
				padding: 8px 0;
				margin: 0;
				font-size: 10px;
				border: none;
				border-radius: 4px;
				cursor: pointer;
				font-weight: bold;
				box-sizing: border-box;
				outline: none;
				user-select: none;
			}
			.redButtons{
				background: #ff4d4d;
				color: white;
			}
			.greenButtons{
				background: #2ecc71;
				color: white;
			}
			.blueButtons{
				background: #3498db;
				color: white;
			}
			.grayButtons{
				background: #7f8c8d;
				color: white;
			}
			@media (max-width: 480px){
				button.step{
					min-width: 20px;
					padding: 10px 0;
					font-size: 10px;
				}
				.button-row {
					gap: 1px;
				}
				#optionZone{
					padding: 10px;
					width: 98%;
				}
				.btn-group button{
					padding: 10px 5px;
					min-width: 65px;
					font-size: 0.8em;
				}
				#more, #less{
					padding: 10px 8px;
				}
			}
		</style>
	</head>
	<body>
		<div id="optionZone">
			<h3 style="margin-top:0">HEX: <output id="valueHexCode" style="width: auto;" title="Clicca per copiare"></output></h3>
			<div class="btn-group">
				<button type="button" onclick="revert()">Revert</button>
				<button type="button" onclick="random()">Random</button>
				<button type="button" onclick="setColor(255, 255, 255)">White</button>
				<button type="button" onclick="setColor(0, 0, 0)">Black</button>
				<button id="more" type="button" onclick="showMore()">↓</button>
				<button id="less" type="button" onclick="showLess()">↑</button>
			</div>
			<div id="sliders">
				<div class="slider-row"><label>R</label> <input type="range" id="red" class="slider" oninput="setAndPatch(0)"/> <output id="valueR"></output></div>
				<div class="slider-row"><label>G</label> <input type="range" id="green" class="slider" oninput="setAndPatch(1)"/> <output id="valueG"></output></div>
				<div class="slider-row"><label>B</label> <input type="range" id="blue" class="slider" oninput="setAndPatch(2)"/> <output id="valueB"></output></div>
				<div class="slider-row"><label>Gray</label> <input type="range" id="gray" class="slider" oninput="setAndPatch(3)"/> <output id="valueGray"></output></div>
				<div class="slider-row"><label>Light</label> <input type="range" id="light" class="slider" oninput="setAndPatch(4)"/> <output id="valueLight"></output></div>
				<div class="slider-row"><label>C</label> <input type="range" id="cyan" class="slider" oninput="setAndPatch(5)"/> <output id="valueC"></output></div>
				<div class="slider-row"><label>M</label> <input type="range" id="magenta" class="slider" oninput="setAndPatch(6)"/> <output id="valueM"></output></div>
				<div class="slider-row"><label>Y</label> <input type="range" id="yellow" class="slider" oninput="setAndPatch(7)"/> <output id="valueY"></output></div>
				<div class="slider-row"><label>K</label> <input type="range" id="black" class="slider" oninput="setAndPatch(8)"/> <output id="valueK"></output></div>
			</div>
			<div id="colorButtons" class="control-group">
				<div class="button-row">
					<button class="redButtons step" onclick="changeColor(0,-20)">-20</button>
					<button class="redButtons step" onclick="changeColor(0,-10)">-10</button>
					<button class="redButtons step" onclick="changeColor(0,-5)">-5</button>
					<button class="redButtons step" onclick="changeColor(0,-2)">-2</button>
					<button class="redButtons step" onclick="changeColor(0,-1)">-1</button>
					<div style="width: 2px; flex-shrink: 0;"></div> <button class="redButtons step" onclick="changeColor(0, 1)">+1</button>
					<button class="redButtons step" onclick="changeColor(0, 2)">+2</button>
					<button class="redButtons step" onclick="changeColor(0, 5)">+5</button>
					<button class="redButtons step" onclick="changeColor(0, 10)">+10</button>
					<button class="redButtons step" onclick="changeColor(0, 20)">+20</button>
				</div>
				<div class="button-row">
					<button class="greenButtons step" onclick="changeColor(1,-20)">-20</button>
					<button class="greenButtons step" onclick="changeColor(1,-10)">-10</button>
					<button class="greenButtons step" onclick="changeColor(1,-5)">-5</button>
					<button class="greenButtons step" onclick="changeColor(1,-2)">-2</button>
					<button class="greenButtons step" onclick="changeColor(1,-1)">-1</button>
					<div style="width: 2px; flex-shrink: 0;"></div>
					<button class="greenButtons step" onclick="changeColor(1, 1)">+1</button>
					<button class="greenButtons step" onclick="changeColor(1, 2)">+2</button>
					<button class="greenButtons step" onclick="changeColor(1, 5)">+5</button>
					<button class="greenButtons step" onclick="changeColor(1, 10)">+10</button>
					<button class="greenButtons step" onclick="changeColor(1, 20)">+20</button>
				</div>
				<div class="button-row">
					<button class="blueButtons step" onclick="changeColor(2,-20)">-20</button>
					<button class="blueButtons step" onclick="changeColor(2,-10)">-10</button>
					<button class="blueButtons step" onclick="changeColor(2,-5)">-5</button>
					<button class="blueButtons step" onclick="changeColor(2,-2)">-2</button>
					<button class="blueButtons step" onclick="changeColor(2,-1)">-1</button>
					<div style="width: 2px; flex-shrink: 0;"></div>
					<button class="blueButtons step" onclick="changeColor(2, 1)">+1</button>
					<button class="blueButtons step" onclick="changeColor(2, 2)">+2</button>
					<button class="blueButtons step" onclick="changeColor(2, 5)">+5</button>
					<button class="blueButtons step" onclick="changeColor(2, 10)">+10</button>
					<button class="blueButtons step" onclick="changeColor(2, 20)">+20</button>
				</div>
				<div class="button-row">
					<button class="grayButtons step" onclick="changeGray(-20)">-20</button>
					<button class="grayButtons step" onclick="changeGray(-10)">-10</button>
					<button class="grayButtons step" onclick="changeGray(-5)">-5</button>
					<button class="grayButtons step" onclick="changeGray(-2)">-2</button>
					<button class="grayButtons step" onclick="changeGray(-1)">-1</button>
					<div style="width: 2px; flex-shrink: 0;"></div>
					<button class="grayButtons step" onclick="changeGray(1)">+1</button>
					<button class="grayButtons step" onclick="changeGray(2)">+2</button>
					<button class="grayButtons step" onclick="changeGray(5)">+5</button>
					<button class="grayButtons step" onclick="changeGray(10)">+10</button>
					<button class="grayButtons step" onclick="changeGray(20)">+20</button>
				</div>
			</div>
		</div>
		<script>
			const VALUES = [
				document.querySelector("#valueR"), document.querySelector("#valueG"), document.querySelector("#valueB"), 
				document.querySelector("#valueGray"), document.querySelector("#valueLight"), 
				document.querySelector("#valueC"), document.querySelector("#valueM"), 
				document.querySelector("#valueY"), document.querySelector("#valueK"), 
				document.querySelector("#valueHexCode")
			];

			const INPUTS = [
				document.querySelector("#red"), document.querySelector("#green"), document.querySelector("#blue"), 
				document.querySelector("#gray"), document.querySelector("#light"), 
				document.querySelector("#cyan"), document.querySelector("#magenta"), 
				document.querySelector("#yellow"), document.querySelector("#black")
			];

			const highlightError = false;
			let viewModes = ["Essential", "Mini", "Medium", "Maxi"];
			let currentModeIndex = viewModes.length - 1;

			function init(){
				for(let i = 0; i < 5; i++){
					INPUTS[i].min = 0; INPUTS[i].max = 255; INPUTS[i].step = 1;
				}
				for(let i = 5; i < 9; i++){
					INPUTS[i].min = 0; INPUTS[i].max = 1; INPUTS[i].step = 0.01;
				}
				setColor(255, 255, 255);
				VALUES[9].onclick = function(){
					navigator.clipboard.writeText(this.textContent);
					const oldText = this.textContent;
					this.textContent = "COPIATO!";
					setTimeout(() => {this.textContent = oldText; }, 800);
				};
			}

			function setAndPatch(component){
				const red = parseInt(INPUTS[0].value);
				const green = parseInt(INPUTS[1].value);
				const blue = parseInt(INPUTS[2].value);
				const gray = parseInt(INPUTS[3].value);
				const cyan = parseFloat(INPUTS[5].value);
				const magenta = parseFloat(INPUTS[6].value);
				const yellow = parseFloat(INPUTS[7].value);
				const black = parseFloat(INPUTS[8].value);
				if(component === 3){
					setColor(gray, gray, gray);
				}else if(component === 4){
					setBrightness();
				}else if(component < 3){
					setColor(red, green, blue);
				}else{
					setColor_CMYK(cyan, magenta, yellow, black);
				}
			}

			function getMin(){
				let min = (parseInt(INPUTS[0].value) <= parseInt(INPUTS[1].value)) ? parseInt(INPUTS[0].value) : parseInt(INPUTS[1].value);
				min = ((min <= parseInt(INPUTS[2].value)) ? min : parseInt(INPUTS[2].value));
				return min
			}

			function getMax(){
				let max = (parseInt(INPUTS[0].value) >= parseInt(INPUTS[1].value)) ? parseInt(INPUTS[0].value) : parseInt(INPUTS[1].value);
				max = ((max >= parseInt(INPUTS[2].value)) ? max : parseInt(INPUTS[2].value));
				return max
			}

			function getColor(){
				sRed = (parseInt(VALUES[0].textContent).toString(16)).padStart(2, '0');
				sGreen = (parseInt(VALUES[1].textContent).toString(16)).padStart(2, '0');
				sBlue = (parseInt(VALUES[2].textContent).toString(16)).padStart(2, '0');
				return ("#" + sRed + sGreen + sBlue);
			}

			function isPossibleToModifyLight(){
				if((parseInt(INPUTS[4].value) > parseInt(VALUES[4].textContent))&&(getMax() === 255)){
					return false;
				}
				if((parseInt(INPUTS[4].value) < parseInt(VALUES[4].textContent))&&(getMin() === 0)){
					return false;
				}
				return true;
			}

			function playErrorSound(){
				const context = new (window.AudioContext || window.webkitAudioContext)();
				const oscillator = context.createOscillator();
				const gain = context.createGain();
				oscillator.type = 'sine';
				oscillator.frequency.setValueAtTime(150, context.currentTime);
				gain.gain.setValueAtTime(0.1, context.currentTime);
				gain.gain.exponentialRampToValueAtTime(0.01, context.currentTime + 0.2);
				oscillator.connect(gain);
				gain.connect(context.destination);
				oscillator.start();
				oscillator.stop(context.currentTime + 0.2);
			}

			function flashError(){
				const output = document.getElementById("valueHexCode");
				output.style.transition = "0.1s";
				output.style.color = "red";
				setTimeout(() => {
					output.style.color = "black";
				}, 200);
				playErrorSound();
			}

			function setBrightness(){
				if(isPossibleToModifyLight()){
					if(parseInt(INPUTS[4].value) != parseInt(VALUES[4].textContent)){
						for(let i = 0; i < 3; i++){
							INPUTS[i].value = (parseInt(INPUTS[i].value) + parseInt(INPUTS[4].value) - parseInt(VALUES[4].textContent));
							VALUES[i].textContent = INPUTS[i].value;
						}
					}
					setColor(INPUTS[0].value, INPUTS[1].value, INPUTS[2].value);
					VALUES[4].textContent = INPUTS[4].value;
					INPUTS[3].value = parseInt((parseInt(VALUES[0].value) + parseInt(VALUES[1].value) + parseInt(VALUES[2].value))/3);
					VALUES[3].textContent = parseInt((parseInt(VALUES[0].value) + parseInt(VALUES[1].value) + parseInt(VALUES[2].value))/3);
					document.body.style.backgroundColor = getColor();
					VALUES[9].textContent = getColor();
					INPUTS[4].value = parseInt((getMax() + getMin())/2);
					VALUES[4].textContent = INPUTS[4].value;
				}else{
					if(highlightError){
						flashError();
					}
				}
				INPUTS[4].value = parseInt(VALUES[4].textContent);
			}

			function setColor(r, g, b){
				r = Math.round(r);
				g = Math.round(g);
				b = Math.round(b);
				[r, g, b].forEach((v, i) => {
					INPUTS[i].value = v;
					VALUES[i].textContent = v;
				});
				let avg = Math.round((r + g + b)/3);
				INPUTS[3].value = avg;
				VALUES[3].textContent = avg;
				let light = Math.round((Math.max(r,g,b) + Math.min(r,g,b))/2);
				INPUTS[4].value = light;
				VALUES[4].textContent = light;
				let dr = r/255, dg = g/255, db = b/255;
				let k = 1 - Math.max(dr, dg, db);
				let c = k === 1 ? 0 :(1 - dr - k)/(1 - k);
				let m = k === 1 ? 0 :(1 - dg - k)/(1 - k);
				let y = k === 1 ? 0 :(1 - db - k)/(1 - k);
				[c, m, y, k].forEach((v, i) => {
					INPUTS[i + 5].value = v.toFixed(2);
					VALUES[i + 5].textContent = v.toFixed(2);
				});
				let hex = "#" + [r, g, b].map(x => x.toString(16).padStart(2, '0')).join('').toUpperCase();
				VALUES[9].textContent = hex;
				document.body.style.backgroundColor = hex;
			}

			function setColor_CMYK(c, m, y, k){
				let r = 255*(1 - c)*(1 - k);
				let g = 255*(1 - m)*(1 - k);
				let b = 255*(1 - y)*(1 - k);
				setColor(r, g, b);
			}

			function revert(){
				setColor(255 - INPUTS[0].value, 255 - INPUTS[1].value, 255 - INPUTS[2].value);
			}

			function random(){
				setColor(Math.random()*255, Math.random()*255, Math.random()*255);
			}

			function changeColor(index, delta){
				let v = [parseInt(INPUTS[0].value), parseInt(INPUTS[1].value), parseInt(INPUTS[2].value)];
				if((v[index] + delta >= 0)&&(v[index] + delta <= 255)){
					v[index] += delta;
					setColor(v[0], v[1], v[2]);
				}else{
					if(highlightError){
						flashError();
					}
				}
			}

			function changeGray(delta){
				let r = parseInt(INPUTS[0].value) + delta;
				let g = parseInt(INPUTS[1].value) + delta;
				let b = parseInt(INPUTS[2].value) + delta;
				let flag = ((r >= 0)&&(r <= 255)&&(g >= 0)&&(g <= 255)&&(b >= 0)&&(b <= 255));
				if(flag){
					setColor(r, g, b);
				}else{
					if(highlightError){
						flashError();
					}
				}
			}

			function changeSetting(direction){
				if((currentModeIndex == 0 && direction == -1)||(currentModeIndex == viewModes.length - 1 && direction == 1)){
					return;
				}
				currentModeIndex += direction;
				const mode = viewModes[currentModeIndex];
				const rows = document.querySelectorAll(".slider-row");
				const colorBtnGroup = document.getElementById("colorButtons");
				const sliderContainer = document.getElementById("sliders");
				if(mode === "Maxi"){
					sliderContainer.style.display = "block";
					rows.forEach(row => row.style.display = "flex");
					colorBtnGroup.style.display = "flex";
				}else if(mode === "Medium"){
					sliderContainer.style.display = "block";
					rows.forEach((row, i) => {
						row.style.display = i < 3 ? "flex" : "none";
					});
					colorBtnGroup.style.display = "flex";
				}else if(mode === "Mini"){
					sliderContainer.style.display = "block";
					rows.forEach((row, i) => {
						row.style.display = i < 3 ? "flex" : "none";
					});
					colorBtnGroup.style.display = "none";
				}else if(mode === "Essential"){
					sliderContainer.style.display = "none";
					colorBtnGroup.style.display = "none";
				}
			}

			function showMore(){
				changeSetting(1);
			}

			function showLess(){
				changeSetting(-1);
			}

			window.onload = init;
		</script>
	</body>
</html>